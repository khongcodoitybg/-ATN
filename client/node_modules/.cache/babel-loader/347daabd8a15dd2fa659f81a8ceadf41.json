{"ast":null,"code":"import _objectSpread from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport jwtAuthService from '../../services/jwtAuthService';\nimport FirebaseAuthService from '../../services/firebase/firebaseAuthService';\nimport { setUserData } from './UserActions';\nimport history from 'history.js';\nimport ConstantList from '../../appConfig';\nexport var LOGIN_ERROR = 'LOGIN_ERROR';\nexport var LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport var LOGIN_LOADING = 'LOGIN_LOADING';\nexport var RESET_PASSWORD = 'RESET_PASSWORD';\nexport function loginWithEmailAndPassword(_ref) {\n  var email = _ref.email,\n    password = _ref.password;\n  return function (dispatch) {\n    dispatch({\n      type: LOGIN_LOADING\n    });\n    jwtAuthService\n    //.loginWithEmailAndPassword(email, password)\n    //.loginWithToken()\n    .loginWithUserNameAndPassword(email.trim(), password.trim()).then(function (user) {\n      dispatch(setUserData(user));\n      //Lưu lại thông tin liên quan đến token tại đây\n\n      //Nhảy đến trang HomePage dự kiến\n      history.push({\n        pathname: ConstantList.ROOT_PATH\n      });\n      window.location.reload();\n      return dispatch({\n        type: LOGIN_SUCCESS\n      });\n    }).catch(function (error) {\n      alert('Tài khoản hoặc mật khẩu không đúng. Mời bạn đăng nhập lại'); //Cần xem cách đưa ra thông báo thông qua đa ngôn ngữ\n      return dispatch({\n        type: LOGIN_ERROR,\n        payload: error\n      });\n    });\n  };\n}\nexport function resetPassword(_ref2) {\n  var email = _ref2.email;\n  return function (dispatch) {\n    dispatch({\n      payload: email,\n      type: RESET_PASSWORD\n    });\n  };\n}\nexport function firebaseLoginEmailPassword(_ref3) {\n  var email = _ref3.email,\n    password = _ref3.password;\n  return function (dispatch) {\n    FirebaseAuthService.signInWithEmailAndPassword(email, password).then(function (user) {\n      if (user) {\n        dispatch(setUserData(_objectSpread({\n          userId: '1',\n          role: 'ADMIN',\n          displayName: 'Watson Joyce',\n          email: 'watsonjoyce@gmail.com',\n          photoURL: './assets/images/face-7.jpg',\n          age: 25,\n          token: 'faslkhfh423oiu4h4kj432rkj23h432u49ufjaklj423h4jkhkjh'\n        }, user)));\n        history.push({\n          pathname: '/'\n        });\n        return dispatch({\n          type: LOGIN_SUCCESS\n        });\n      } else {\n        return dispatch({\n          type: LOGIN_ERROR,\n          payload: 'Login Failed'\n        });\n      }\n    }).catch(function (error) {\n      return dispatch({\n        type: LOGIN_ERROR,\n        payload: error\n      });\n    });\n  };\n}","map":{"version":3,"names":["jwtAuthService","FirebaseAuthService","setUserData","history","ConstantList","LOGIN_ERROR","LOGIN_SUCCESS","LOGIN_LOADING","RESET_PASSWORD","loginWithEmailAndPassword","email","password","dispatch","type","loginWithUserNameAndPassword","trim","then","user","push","pathname","ROOT_PATH","window","location","reload","catch","error","alert","payload","resetPassword","firebaseLoginEmailPassword","signInWithEmailAndPassword","userId","role","displayName","photoURL","age","token"],"sources":["D:/WorkSpace/client/src/app/redux/actions/LoginActions.js"],"sourcesContent":["import jwtAuthService from '../../services/jwtAuthService';\nimport FirebaseAuthService from '../../services/firebase/firebaseAuthService';\nimport { setUserData } from './UserActions';\nimport history from 'history.js';\nimport ConstantList from '../../appConfig';\nexport const LOGIN_ERROR = 'LOGIN_ERROR';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_LOADING = 'LOGIN_LOADING';\nexport const RESET_PASSWORD = 'RESET_PASSWORD';\n\nexport function loginWithEmailAndPassword({ email, password }) {\n\treturn (dispatch) => {\n\t\tdispatch({\n\t\t\ttype: LOGIN_LOADING,\n\t\t});\n\n\t\tjwtAuthService\n\t\t\t//.loginWithEmailAndPassword(email, password)\n\t\t\t//.loginWithToken()\n\t\t\t.loginWithUserNameAndPassword(email.trim(), password.trim())\n\t\t\t.then((user) => {\n\t\t\t\tdispatch(setUserData(user));\n\t\t\t\t//Lưu lại thông tin liên quan đến token tại đây\n\n\t\t\t\t//Nhảy đến trang HomePage dự kiến\n\t\t\t\thistory.push({\n\t\t\t\t\tpathname: ConstantList.ROOT_PATH,\n\t\t\t\t});\n\t\t\t\twindow.location.reload();\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_SUCCESS,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\talert('Tài khoản hoặc mật khẩu không đúng. Mời bạn đăng nhập lại'); //Cần xem cách đưa ra thông báo thông qua đa ngôn ngữ\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_ERROR,\n\t\t\t\t\tpayload: error,\n\t\t\t\t});\n\t\t\t});\n\t};\n}\n\nexport function resetPassword({ email }) {\n\treturn (dispatch) => {\n\t\tdispatch({\n\t\t\tpayload: email,\n\t\t\ttype: RESET_PASSWORD,\n\t\t});\n\t};\n}\n\nexport function firebaseLoginEmailPassword({ email, password }) {\n\treturn (dispatch) => {\n\t\tFirebaseAuthService.signInWithEmailAndPassword(email, password)\n\t\t\t.then((user) => {\n\t\t\t\tif (user) {\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\tsetUserData({\n\t\t\t\t\t\t\tuserId: '1',\n\t\t\t\t\t\t\trole: 'ADMIN',\n\t\t\t\t\t\t\tdisplayName: 'Watson Joyce',\n\t\t\t\t\t\t\temail: 'watsonjoyce@gmail.com',\n\t\t\t\t\t\t\tphotoURL: './assets/images/face-7.jpg',\n\t\t\t\t\t\t\tage: 25,\n\t\t\t\t\t\t\ttoken: 'faslkhfh423oiu4h4kj432rkj23h432u49ufjaklj423h4jkhkjh',\n\t\t\t\t\t\t\t...user,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\thistory.push({\n\t\t\t\t\t\tpathname: '/',\n\t\t\t\t\t});\n\n\t\t\t\t\treturn dispatch({\n\t\t\t\t\t\ttype: LOGIN_SUCCESS,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn dispatch({\n\t\t\t\t\t\ttype: LOGIN_ERROR,\n\t\t\t\t\t\tpayload: 'Login Failed',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treturn dispatch({\n\t\t\t\t\ttype: LOGIN_ERROR,\n\t\t\t\t\tpayload: error,\n\t\t\t\t});\n\t\t\t});\n\t};\n}\n"],"mappings":";AAAA,OAAOA,cAAc,MAAM,+BAA+B;AAC1D,OAAOC,mBAAmB,MAAM,6CAA6C;AAC7E,SAASC,WAAW,QAAQ,eAAe;AAC3C,OAAOC,OAAO,MAAM,YAAY;AAChC,OAAOC,YAAY,MAAM,iBAAiB;AAC1C,OAAO,IAAMC,WAAW,GAAG,aAAa;AACxC,OAAO,IAAMC,aAAa,GAAG,eAAe;AAC5C,OAAO,IAAMC,aAAa,GAAG,eAAe;AAC5C,OAAO,IAAMC,cAAc,GAAG,gBAAgB;AAE9C,OAAO,SAASC,yBAAyB,OAAsB;EAAA,IAAnBC,KAAK,QAALA,KAAK;IAAEC,QAAQ,QAARA,QAAQ;EAC1D,OAAO,UAACC,QAAQ,EAAK;IACpBA,QAAQ,CAAC;MACRC,IAAI,EAAEN;IACP,CAAC,CAAC;IAEFP;IACC;IACA;IAAA,CACCc,4BAA4B,CAACJ,KAAK,CAACK,IAAI,EAAE,EAAEJ,QAAQ,CAACI,IAAI,EAAE,CAAC,CAC3DC,IAAI,CAAC,UAACC,IAAI,EAAK;MACfL,QAAQ,CAACV,WAAW,CAACe,IAAI,CAAC,CAAC;MAC3B;;MAEA;MACAd,OAAO,CAACe,IAAI,CAAC;QACZC,QAAQ,EAAEf,YAAY,CAACgB;MACxB,CAAC,CAAC;MACFC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;MACxB,OAAOX,QAAQ,CAAC;QACfC,IAAI,EAAEP;MACP,CAAC,CAAC;IACH,CAAC,CAAC,CACDkB,KAAK,CAAC,UAACC,KAAK,EAAK;MACjBC,KAAK,CAAC,2DAA2D,CAAC,CAAC,CAAC;MACpE,OAAOd,QAAQ,CAAC;QACfC,IAAI,EAAER,WAAW;QACjBsB,OAAO,EAAEF;MACV,CAAC,CAAC;IACH,CAAC,CAAC;EACJ,CAAC;AACF;AAEA,OAAO,SAASG,aAAa,QAAY;EAAA,IAATlB,KAAK,SAALA,KAAK;EACpC,OAAO,UAACE,QAAQ,EAAK;IACpBA,QAAQ,CAAC;MACRe,OAAO,EAAEjB,KAAK;MACdG,IAAI,EAAEL;IACP,CAAC,CAAC;EACH,CAAC;AACF;AAEA,OAAO,SAASqB,0BAA0B,QAAsB;EAAA,IAAnBnB,KAAK,SAALA,KAAK;IAAEC,QAAQ,SAARA,QAAQ;EAC3D,OAAO,UAACC,QAAQ,EAAK;IACpBX,mBAAmB,CAAC6B,0BAA0B,CAACpB,KAAK,EAAEC,QAAQ,CAAC,CAC7DK,IAAI,CAAC,UAACC,IAAI,EAAK;MACf,IAAIA,IAAI,EAAE;QACTL,QAAQ,CACPV,WAAW;UACV6B,MAAM,EAAE,GAAG;UACXC,IAAI,EAAE,OAAO;UACbC,WAAW,EAAE,cAAc;UAC3BvB,KAAK,EAAE,uBAAuB;UAC9BwB,QAAQ,EAAE,4BAA4B;UACtCC,GAAG,EAAE,EAAE;UACPC,KAAK,EAAE;QAAsD,GAC1DnB,IAAI,EACN,CACF;QAEDd,OAAO,CAACe,IAAI,CAAC;UACZC,QAAQ,EAAE;QACX,CAAC,CAAC;QAEF,OAAOP,QAAQ,CAAC;UACfC,IAAI,EAAEP;QACP,CAAC,CAAC;MACH,CAAC,MAAM;QACN,OAAOM,QAAQ,CAAC;UACfC,IAAI,EAAER,WAAW;UACjBsB,OAAO,EAAE;QACV,CAAC,CAAC;MACH;IACD,CAAC,CAAC,CACDH,KAAK,CAAC,UAACC,KAAK,EAAK;MACjB,OAAOb,QAAQ,CAAC;QACfC,IAAI,EAAER,WAAW;QACjBsB,OAAO,EAAEF;MACV,CAAC,CAAC;IACH,CAAC,CAAC;EACJ,CAAC;AACF"},"metadata":{},"sourceType":"module"}