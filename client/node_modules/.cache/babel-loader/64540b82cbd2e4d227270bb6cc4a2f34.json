{"ast":null,"code":"import _classCallCheck from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\WorkSpace\\\\client\\\\src\\\\egret\\\\components\\\\EgretSearchBox.jsx\";\nimport React, { Component } from 'react';\nimport { Icon, IconButton, withStyles } from '@material-ui/core';\nimport './Search.scss';\nimport ConstantList from '../../app/appConfig';\nimport axios from 'axios';\nimport debounce from 'lodash.debounce';\nimport { BehaviorSubject } from 'rxjs';\nimport { throttle } from 'lodash';\nimport history from 'history.js';\nvar styles = function styles(theme) {\n  return {\n    root: {\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    }\n  };\n};\nvar EgretSearchBox = /*#__PURE__*/function (_Component) {\n  _inherits(EgretSearchBox, _Component);\n  function EgretSearchBox(props) {\n    var _this;\n    _classCallCheck(this, EgretSearchBox);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EgretSearchBox).call(this, props));\n    _this.state = {\n      open: false,\n      searchValue: '',\n      searchResults: [],\n      resultOpen: false\n    };\n    _this.toggle = function () {\n      _this.setState({\n        open: !_this.state.open\n      });\n      _this.setState({\n        searchValue: '',\n        searchResults: [],\n        resultOpen: false\n      });\n    };\n    _this.handleChange = function (e) {\n      _this.setState({\n        searchValue: e.target.value\n      });\n      if (e.target.value) {\n        _this.handleChange1();\n      } else {\n        _this.setState({\n          searchResults: []\n        });\n      }\n    };\n    _this.handleClick = function () {\n      _this.setState({\n        open: false\n      });\n    };\n    _this.handleClickShowPost = function (id) {\n      _this.toggle();\n      history.push(ConstantList.ROOT_PATH + \"page-layouts/post-detail/:\".concat(id));\n    };\n    _this.handleChange1 = debounce(_this.handleChange1.bind(_assertThisInitialized(_this)), 1000);\n    _this.wrapperRef = React.createRef();\n    return _this;\n  }\n  _createClass(EgretSearchBox, [{\n    key: \"handleChange1\",\n    value: function handleChange1() {\n      var _this2 = this;\n      axios.get(ConstantList.API_ENPOINT + \"/forum/Article/filterByKey?key=\".concat(this.state.searchValue)).then(function (res) {\n        _this2.setState({\n          searchResults: res.data.data.resultFilter\n        });\n        console.log(res);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.state.open) {\n        document.addEventListener('click', this.handleClick);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // important\n      if (this.state.open) {\n        document.removeEventListener('click', this.handleClick);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var classes = this.props.classes;\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 4\n        }\n      }, !this.state.open && /*#__PURE__*/React.createElement(IconButton, {\n        onClick: this.toggle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 7\n        }\n      }, \"search\")), this.state.open && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"egret-search-box\",\n        ref: this.wrapperRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"render\",\n        ref: this.myRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"search-box\",\n        spellCheck: false,\n        type: \"text\",\n        placeholder: \"T\\xECm ki\\u1EBFm\",\n        value: this.state.searchValue,\n        onChange: this.handleChange,\n        autoFocus: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 8\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"search-result\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 8\n        }\n      }, this.state.searchResults && this.state.searchResults.map(function (item) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"item\",\n          onClick: function onClick() {\n            _this3.handleClickShowPost(item.id);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"search-title\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 12\n          }\n        }, item.title), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"search-author\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 12\n          }\n        }, \"T\\xE1c gi\\u1EA3: \", item.authorName));\n      }))), /*#__PURE__*/React.createElement(IconButton, {\n        onClick: this.toggle,\n        className: \"iconX\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 8\n        }\n      }, \"close\"))));\n    }\n  }]);\n  return EgretSearchBox;\n}(Component);\nexport default withStyles(styles, {\n  withTheme: true\n})(EgretSearchBox);","map":{"version":3,"names":["React","Component","Icon","IconButton","withStyles","ConstantList","axios","debounce","BehaviorSubject","throttle","history","styles","theme","root","backgroundColor","palette","primary","main","color","contrastText","EgretSearchBox","props","state","open","searchValue","searchResults","resultOpen","toggle","setState","handleChange","e","target","value","handleChange1","handleClick","handleClickShowPost","id","push","ROOT_PATH","bind","wrapperRef","createRef","get","API_ENPOINT","then","res","data","resultFilter","console","log","document","addEventListener","removeEventListener","classes","myRef","map","item","title","authorName","withTheme"],"sources":["D:/WorkSpace/client/src/egret/components/EgretSearchBox.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Icon, IconButton, withStyles } from '@material-ui/core';\nimport './Search.scss';\nimport ConstantList from '../../app/appConfig';\nimport axios from 'axios';\nimport debounce from 'lodash.debounce';\nimport { BehaviorSubject } from 'rxjs';\nimport { throttle } from 'lodash';\nimport history from 'history.js';\n\nconst styles = (theme) => ({\n\troot: {\n\t\tbackgroundColor: theme.palette.primary.main,\n\t\tcolor: theme.palette.primary.contrastText,\n\t},\n});\n\nclass EgretSearchBox extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleChange1 = debounce(this.handleChange1.bind(this), 1000);\n\t\tthis.wrapperRef = React.createRef();\n\t}\n\tstate = {\n\t\topen: false,\n\t\tsearchValue: '',\n\t\tsearchResults: [],\n\t\tresultOpen: false,\n\t};\n\n\ttoggle = () => {\n\t\tthis.setState({ open: !this.state.open });\n\t\tthis.setState({ searchValue: '', searchResults: [], resultOpen: false });\n\t};\n\n\thandleChange = (e) => {\n\t\tthis.setState({ searchValue: e.target.value });\n\t\tif (e.target.value) {\n\t\t\tthis.handleChange1();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tsearchResults: [],\n\t\t\t});\n\t\t}\n\t};\n\n\thandleChange1() {\n\t\taxios\n\t\t\t.get(\n\t\t\t\tConstantList.API_ENPOINT +\n\t\t\t\t\t`/forum/Article/filterByKey?key=${this.state.searchValue}`\n\t\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ searchResults: res.data.data.resultFilter });\n\t\t\t\tconsole.log(res);\n\t\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.state.open) {\n\t\t\tdocument.addEventListener('click', this.handleClick);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\t// important\n\t\tif (this.state.open) {\n\t\t\tdocument.removeEventListener('click', this.handleClick);\n\t\t}\n\t}\n\n\thandleClick = () => {\n\t\tthis.setState({ open: false });\n\t};\n\n\thandleClickShowPost = (id) => {\n\t\tthis.toggle();\n\t\thistory.push(ConstantList.ROOT_PATH + `page-layouts/post-detail/:${id}`);\n\t};\n\n\trender() {\n\t\tlet { classes } = this.props;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{!this.state.open && (\n\t\t\t\t\t<IconButton onClick={this.toggle}>\n\t\t\t\t\t\t<Icon>search</Icon>\n\t\t\t\t\t</IconButton>\n\t\t\t\t)}\n\n\t\t\t\t{this.state.open && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"egret-search-box\"\n\t\t\t\t\t\tref={this.wrapperRef}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"render\"\n\t\t\t\t\t\t\tref={this.myRef}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"search-box\"\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Tìm kiếm\"\n\t\t\t\t\t\t\t\tvalue={this.state.searchValue}\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"search-result\">\n\t\t\t\t\t\t\t\t{this.state.searchResults &&\n\t\t\t\t\t\t\t\t\tthis.state.searchResults.map((item) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"item\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.handleClickShowPost(item.id);\n\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"search-title\">{item.title}</p>\n\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"search-author\">\n\t\t\t\t\t\t\t\t\t\t\t\tTác giả: {item.authorName}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tonClick={this.toggle}\n\t\t\t\t\t\t\tclassName=\"iconX\">\n\t\t\t\t\t\t\t<Icon>close</Icon>\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(EgretSearchBox);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}