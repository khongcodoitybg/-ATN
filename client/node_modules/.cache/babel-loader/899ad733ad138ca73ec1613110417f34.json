{"ast":null,"code":"import _classCallCheck from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\WorkSpace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\WorkSpace\\\\client\\\\src\\\\app\\\\auth\\\\AuthGuard.jsx\";\nimport React, { Component, Fragment } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport AppContext from 'app/appContext';\nimport ConstantList from '../appConfig';\nvar AuthGuard = /*#__PURE__*/function (_Component) {\n  _inherits(AuthGuard, _Component);\n  function AuthGuard(props, context) {\n    var _this;\n    _classCallCheck(this, AuthGuard);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthGuard).call(this, props));\n    var routes = context.routes;\n    _this.state = {\n      authenticated: true,\n      routes: routes\n    };\n    return _this;\n  }\n  _createClass(AuthGuard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // if (!this.state.authenticated) {\n      //   this.redirectRoute(this.props);\n      // }\n    }\n  }, {\n    key: \"redirectRoute\",\n    value: function redirectRoute(props) {\n      var location = props.location,\n        history = props.history;\n      var pathname = location.pathname;\n      history.push({\n        //pathname: ConstantList.ROOT_PATH + \"session/signin\",\n        pathname: ConstantList.HOME_PAGE,\n        state: {\n          redirectUrl: pathname\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = this.props.children;\n      var authenticated = this.state.authenticated;\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 10\n        }\n      }, children);\n\n      //return authenticated ? <Fragment>{children}</Fragment> : null;\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var location = props.location,\n        user = props.user;\n      var pathname = location.pathname;\n      var matched = state.routes.find(function (r) {\n        return r.path === pathname;\n      });\n      var authenticated = matched && matched.auth && matched.auth.length ? matched.auth.includes(user.role) : true;\n      return {\n        authenticated: authenticated\n      };\n    }\n  }]);\n  return AuthGuard;\n}(Component);\nAuthGuard.contextType = AppContext;\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user\n  };\n};\nexport default withRouter(connect(mapStateToProps)(AuthGuard));","map":{"version":3,"names":["React","Component","Fragment","withRouter","connect","AppContext","ConstantList","AuthGuard","props","context","routes","state","authenticated","location","history","pathname","push","HOME_PAGE","redirectUrl","children","user","matched","find","r","path","auth","length","includes","role","contextType","mapStateToProps"],"sources":["D:/WorkSpace/client/src/app/auth/AuthGuard.jsx"],"sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport AppContext from 'app/appContext';\nimport ConstantList from '../appConfig';\nclass AuthGuard extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props);\n\t\tlet { routes } = context;\n\n\t\tthis.state = {\n\t\t\tauthenticated: true,\n\t\t\troutes,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\t// if (!this.state.authenticated) {\n\t\t//   this.redirectRoute(this.props);\n\t\t// }\n\t}\n\n\tstatic getDerivedStateFromProps(props, state) {\n\t\tconst { location, user } = props;\n\t\tconst { pathname } = location;\n\t\tconst matched = state.routes.find((r) => r.path === pathname);\n\t\tconst authenticated =\n\t\t\tmatched && matched.auth && matched.auth.length\n\t\t\t\t? matched.auth.includes(user.role)\n\t\t\t\t: true;\n\n\t\treturn {\n\t\t\tauthenticated,\n\t\t};\n\t}\n\n\tredirectRoute(props) {\n\t\tconst { location, history } = props;\n\t\tconst { pathname } = location;\n\n\t\thistory.push({\n\t\t\t//pathname: ConstantList.ROOT_PATH + \"session/signin\",\n\t\t\tpathname: ConstantList.HOME_PAGE,\n\t\t\tstate: { redirectUrl: pathname },\n\t\t});\n\t}\n\n\trender() {\n\t\tlet { children } = this.props;\n\t\tconst { authenticated } = this.state;\n\n\t\treturn <Fragment>{children}</Fragment>;\n\n\t\t//return authenticated ? <Fragment>{children}</Fragment> : null;\n\t}\n}\n\nAuthGuard.contextType = AppContext;\n\nconst mapStateToProps = (state) => ({\n\tuser: state.user,\n});\n\nexport default withRouter(connect(mapStateToProps)(AuthGuard));\n"],"mappings":";;;;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,OAAO,QAAQ,aAAa;AACrC,OAAOC,UAAU,MAAM,gBAAgB;AACvC,OAAOC,YAAY,MAAM,cAAc;AAAC,IAClCC,SAAS;EAAA;EACd,mBAAYC,KAAK,EAAEC,OAAO,EAAE;IAAA;IAAA;IAC3B,+EAAMD,KAAK;IAAE,IACPE,MAAM,GAAKD,OAAO,CAAlBC,MAAM;IAEZ,MAAKC,KAAK,GAAG;MACZC,aAAa,EAAE,IAAI;MACnBF,MAAM,EAANA;IACD,CAAC;IAAC;EACH;EAAC;IAAA;IAAA,oCAEmB;MACnB;MACA;MACA;IAAA;EACA;IAAA;IAAA,8BAgBaF,KAAK,EAAE;MAAA,IACZK,QAAQ,GAAcL,KAAK,CAA3BK,QAAQ;QAAEC,OAAO,GAAKN,KAAK,CAAjBM,OAAO;MAAA,IACjBC,QAAQ,GAAKF,QAAQ,CAArBE,QAAQ;MAEhBD,OAAO,CAACE,IAAI,CAAC;QACZ;QACAD,QAAQ,EAAET,YAAY,CAACW,SAAS;QAChCN,KAAK,EAAE;UAAEO,WAAW,EAAEH;QAAS;MAChC,CAAC,CAAC;IACH;EAAC;IAAA;IAAA,yBAEQ;MAAA,IACFI,QAAQ,GAAK,IAAI,CAACX,KAAK,CAAvBW,QAAQ;MAAA,IACNP,aAAa,GAAK,IAAI,CAACD,KAAK,CAA5BC,aAAa;MAErB,oBAAO,oBAAC,QAAQ;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,GAAEO,QAAQ,CAAY;;MAEtC;IACD;EAAC;IAAA;IAAA,yCAhC+BX,KAAK,EAAEG,KAAK,EAAE;MAAA,IACrCE,QAAQ,GAAWL,KAAK,CAAxBK,QAAQ;QAAEO,IAAI,GAAKZ,KAAK,CAAdY,IAAI;MAAA,IACdL,QAAQ,GAAKF,QAAQ,CAArBE,QAAQ;MAChB,IAAMM,OAAO,GAAGV,KAAK,CAACD,MAAM,CAACY,IAAI,CAAC,UAACC,CAAC;QAAA,OAAKA,CAAC,CAACC,IAAI,KAAKT,QAAQ;MAAA,EAAC;MAC7D,IAAMH,aAAa,GAClBS,OAAO,IAAIA,OAAO,CAACI,IAAI,IAAIJ,OAAO,CAACI,IAAI,CAACC,MAAM,GAC3CL,OAAO,CAACI,IAAI,CAACE,QAAQ,CAACP,IAAI,CAACQ,IAAI,CAAC,GAChC,IAAI;MAER,OAAO;QACNhB,aAAa,EAAbA;MACD,CAAC;IACF;EAAC;EAAA;AAAA,EA7BsBX,SAAS;AAoDjCM,SAAS,CAACsB,WAAW,GAAGxB,UAAU;AAElC,IAAMyB,eAAe,GAAG,SAAlBA,eAAe,CAAInB,KAAK;EAAA,OAAM;IACnCS,IAAI,EAAET,KAAK,CAACS;EACb,CAAC;AAAA,CAAC;AAEF,eAAejB,UAAU,CAACC,OAAO,CAAC0B,eAAe,CAAC,CAACvB,SAAS,CAAC,CAAC"},"metadata":{},"sourceType":"module"}